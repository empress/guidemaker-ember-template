<ol class="table-of-contents">
  {{#each @data as |page|}}
    {{! template-lint-disable simple-unless }}
    {{#unless (or page.skipToc (get page "skip-toc"))}}
      {{#if page.pages}}
        <li class="toc-group">
          <CpPanel @open={{starts-with (or page.url page.id) (or @currentSection.url @currentSection.id)}} as |p|>
            <LinkTo @route="version.show" @model={{or page.url page.id}} class="cp-Panel-toggle" data-test-toc-link={{page.title}}>
              {{page.title}}
            </LinkTo>
            <p.body>
              <TableOfContents @data={{page.pages}} @currentPage={{page}} @currentSection={{@currentSection}} />
            </p.body>
          </CpPanel>
        </li>
      {{else}}

        <li class="toc-link {{if (eq @currentPage.url page.url) "selected"}}">
          <LinkTo @route="version.show" @model={{page.url}} data-test-toc-link={{page.title}}>
            {{page.title}}
          </LinkTo>
        </li>
      {{/if}}
    {{/unless}}
  {{/each}}
</ol>